!function(t){function e(t,e){if(t.forEach)return t.forEach(e);for(var r in t)e(t[r],r,t)}function r(t,e){var r=[];return r.add=function(t,e){"function"===s(t)&&(t=t()),null==t&&(t=""),r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},a(r,t,e),r.join("&").replace(/%20/g,"+")}function a(e,r,n,o){var u=s(r),c="object"===u;t.util.each(r,function(t,r){var u=s(t),l="object"===u,i="array"===u;o&&(r=n?o:[o,"[",c||l||i?r:"","]"].join("")),i||!n&&l?a(e,t,n,r):e.add(t,r)})}function n(e){var r,a,n,o={type:"GET",url:location.href,data:"",dataType:"json",cache:!1,async:!0,username:null,password:null,context:null,timeout:0,xhr:function(){return new window.XMLHttpRequest},success:t.util.NOOP,error:t.util.NOOP},c=/^\s*$/;return e=l(o,e||{}),r=e.url.indexOf("#"),r>-1&&(e.url=e.url.slice(0,r)),u(e),a=e.dataType,e.cache&&t.util.log("暂不支持绕过缓存噢~"),"script"===a?(t.util.log('暂不支持 type = "script" 奥~'),null):(n=e.xhr(),n.onreadystatechange=function(){if(4===n.readyState){n.onreadystatechange=t.util.NOOP;var r,a=!1;if(n.status>=200&&n.status<300||304==n.status){r=n.responseText;try{r=c.test(r)?null:JSON.parse(r)}catch(o){a=o}a?i.error(a,"parsererror",n,e):i.success(r,n,e)}else i.error(n.statusText||null,n.status?"error":"abort",n,e)}},n.open(e.type,e.url,e.async,e.username,e.password),e.timeout&&t.util.log("暂不支持超时噢~"),void n.send(e.data))}function o(){}function u(e){"string"!==s(e.data)&&(e.data=t.util.param(e.data)),"get"===e.type.toLocaleLowerCase()&&(e.url=c(e.url,e.data),e.data=void 0)}function c(t,e){return""===e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function s(t){return Object.prototype.toString.call(t).replace(/\[\object|\]|\s/gi,"").toLowerCase()}var l=t.util.extend,i={error:function(t,e,r,a){var n=a.context;a.error.call(n,r,e,t)},success:function(t,e,r){var a=r.context;r.success.call(a,t,"success",e)}};t.util.each=e,t.util.param=r,t.util.NOOP=o,t.ajax=t.util.ajax=n}(Vue);