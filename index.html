<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="dns-prefetch" href="//cdn.bootcss.com">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <title>Test Bed</title>
    <style>
        .wrapper {
            max-width: 960px;
            overflow-y: hidden;
            margin: 4rem auto 1rem;
        }
    </style>
</head>
<body>

<div class="wrapper">

    <a href="#nogo" class="btn" v-on="click : getData">Get Data</a>

    <p>
        JSON: {{msg}}
    </p>
    <table class="table table-bordered table-striped" width="100%">
        <tr v-repeat="item : items">
            <td class="text-right">
                <strong>{{$key}}:</strong>
            </td>
            <td> {{item}}</td>
        </tr>

    </table>

    <ul>
        <li>
            JSONP:{{jsonp.result_info}}
        </li>
        <li v-repeat="item : jsonp">
            <strong>{{$key}}</strong> : {{item}}
        </li>
    </ul>


</div>

<script src="//cdn.bootcss.com/vue/0.12.10/vue.js"></script>
<script src="dist/plugins.js"></script>
<script>

    Vue.ready(function (Vue) {

        var WIN = window;

        // TODO: Vue.ajax + components.async @v 0.12.*

        Vue.config.debug = true;

        var data = {
            // items: Vue.util
            items: {
                testBbject: 1
            },
            test2: [1, 3, 4],
            jsonp: {}
            //,
            // msg:1
        };

        var url = 'http://localhost:63342/GITHUB/Vue-plugins/test-bed/test-datas.json';

        function __callBack(ajaxData) {
            console.log(ajaxData, 'ajaxData');
            vm.$data.$add('msg', ajaxData.msg);
        }


        Vue.get(url, data, __callBack);

        var vm = new Vue({
            el: '.wrapper',
            data: data,
            methods: {
                getData: function () {

                    Vue.ajax({
                        url: url,
                        data: this.$data,
                        success: __callBack
                    });
                }

            }
        });

        WIN.globalVM = vm;

        // 直接load一个文件
        Vue.loadFile('//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.css', {id: 'id'});
        Vue.loadFile(
                '//cdn.bootcss.com/zepto/1.1.6/zepto.js',
                function () {
                    console.log(decodeURIComponent($.param(data)));
                    console.log(decodeURIComponent(Vue.util.param(data)));
                }
        );
        // load 一组文件


        var jsonpUrl1 = 'http://qianbao.baidu.com/is/check_black_list?invite_code=test&http_referer=&call_back=?';
        var jsonpUrl2 = 'https://www.baifubao.com/portrait/0/get_portrait/0?callback=?';

        Vue.getJSON(jsonpUrl1, function (data) {
            console.log(data);
        });


    });

</script>
</body>
</html>